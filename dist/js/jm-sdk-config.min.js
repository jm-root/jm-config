var jm=jm||{};"undefined"!=typeof exports&&"undefined"!=typeof module&&(jm=require("jm-sdk-core"),require("jm-ms")),function(){var i=jm.sdk,t=jm.ms;i.on("init",function(t){var n="config";t[n]=t[n]||{},t[n].uri=t[n].uri||t.uri,t[n].timeout=t[n].timeout||t.timeout,i[n].init(t[n])}),i.config={init:function(i){var n=this;i=i||{};var e=i.uri,u=i.prefix||"/config";this.uri=e+u,t.client({uri:this.uri,timeout:i.timeout||0},function(i,t){n.client=t}),jm.enableEvent(this)},_getlisturi:function(i){var t=i.root||"";return"/"+t},_geturi:function(i){var t=i.key||"";return this._getlisturi(i)+"/"+t},getConfig:function(i,t){t=t||function(){},i=i||{};var n=this._geturi(i);this.client.get({uri:n},t)},setConfig:function(i,t){t=t||function(){},i=i||{};var n=this._geturi(i);this.client.post({uri:n,data:i},t)},delConfig:function(i,t){t=t||function(){},i=i||{};var n=this._geturi(i);this.client["delete"]({uri:n},t)},delRoot:function(i,t){t=t||function(){},i=i||{};var n=this._getlisturi(i);this.client["delete"]({uri:n},t)},listConfig:function(i,t){t=t||function(){},i=i||{};var n=this._getlisturi(i);i.all&&(n+="?all=1"),this.client.get({uri:n},t)},setConfigs:function(i,t){t=t||function(){},i=i||{};var n=this._geturi(i);this.client.post({uri:n,data:i},t)}}}();